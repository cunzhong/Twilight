---
import { Icon } from "astro-icon/components";
---

<!-- There can't be a filter on parent element, or it will break `fixed` -->
<div class="back-to-top-wrapper block">
    <div id="back-to-top-btn" class="back-to-top-btn hide flex items-center rounded-2xl overflow-hidden transition"
         onclick="backToTop()">
        <button aria-label="Back to Top" class="btn-card h-[3.57rem] w-[3.57rem]">
            <Icon name="material-symbols:keyboard-arrow-up-rounded" class="mx-auto"></Icon>
        </button>
    </div>
</div>

<style lang="stylus">

    .back-to-top-wrapper
        width: 3.57rem
        height: 3.57rem
        position: absolute
        right: 0
        top: 0
        pointer-events: none

    .back-to-top-btn
        color: var(--primary)
        font-size: 2.25rem
        font-weight: bold
        border: none
        position: fixed
        bottom: 9.9rem
        opacity: 1
        right: 5.31rem
        cursor: pointer
        transform: translateX(5rem)
        pointer-events: auto
        transition: box-shadow 1s ease-in-out

        i
            font-size: 1.75rem

        &.hide
            transform: translateX(5rem) scale(0.9)
            opacity: 0
            pointer-events: none

        &:active
            transform: translateX(5rem) scale(0.9)

    // Desktop
    @media (max-width: 1560px)
        .back-to-top-btn
            box-shadow:
                0 0 0 1px var(--btn-regular-bg),
                0 0 1em var(--btn-regular-bg);

    // Mobile
    @media (max-width: 768px)
        .back-to-top-wrapper
            display: none

</style>

<script is:raw is:inline>
    function backToTop() {
        // 直接使用原生滚动，避免OverlayScrollbars冲突
    window.scroll({ top: 0, behavior: 'smooth' });
}
</script>